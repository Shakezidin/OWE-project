version: '3.0'
services:

##############DATABASE#####################
 service-postgres:
    image: postgres_db_latest:v1
    container_name: postgres_db_latest_1
    restart: always
    environment:
      - POSTGRES_USER=OwePostgres
      - POSTGRES_PASSWORD=OwePostgres
    volumes:
      - /var/postgresql/data/:/var/lib/postgresql/data
    ports:
      - '5432:5432'
    networks:
      owe_net:
        ipv4_address: 172.30.0.211

############### OWE HUB CALC #####################
 service-owehub-calc:
   restart: always
   image: owehub-calc:v1
   container_name: owehub-calc_1
   networks:
     owe_net:
       ipv4_address: 172.30.0.212
   ports:
     - "31021:8080"
   environment:
     SELF_CFG_PATH: "json/"
     ANLF_SVC_ADDR: 
     OAUTH2_SUPPORT: "NO"
     OPEN_HTTP_STD_PORT: "NO"
     HTTPS_SUPPORT: "NO"
     HTTP_READ_HEADER_TIMEOUT: "10"
   volumes:
     - /var/log/owe/:/var/log/owe/
   privileged: true
############### OWE HUB MAIN #####################
 service-owehub-main:
   restart: always
   image: owehub-main:v1
   container_name: owehub-main_1
   networks:
     owe_net:
       ipv4_address: 172.30.0.213
   ports:
     - "31020:8080"
   environment:
     SELF_CFG_PATH: "json/"
     ANLF_SVC_ADDR: 
     OAUTH2_SUPPORT: "NO"
     OPEN_HTTP_STD_PORT: "NO"
     HTTPS_SUPPORT: "NO"
     HTTP_READ_HEADER_TIMEOUT: "10"
   volumes:
     - /var/log/owe/:/var/log/owe/
   privileged: true

networks:
  owe_net:
    driver: bridge
    ipam:
      driver: default
      config:
      - subnet: 172.30.0.0/24